<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css" />
  <title>토이 프로젝트</title>
</head>
<body>
  <header>
      <div class ="container">
        <div class="header-content">
          <img class="logo" src="img/Logo.svg" />
          <nav id="nav">
              <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Support</a></li>
                <li><button>Download</button></li>
              </ul>
          </nav>
        </div>
        <div class="top-background">
        <section class="text-wrapper">
          <h1>Lorem ipsum is simply <br> dummy text of the printing and</h1>
          <p>Lorem ipsum is simply dummy text of the printing and <br>
            typesetting industry. <br>
            Lorem ipsum has been the industry's standard dummy text <br>
            ever since the 1500s, when an unknown</p>
          <button type="button">Download</button>
        </section>
        <section class="main-image">
          <img src="img/img_cat.png" alt="고양이 사진">
        </section>
      </div>
      </div>
  </header>
  <br />
  <br />
  <article>
    <div class="container">
        <div class="article-content">
            <div class="article-image">
                <img src="img/img_0.png" />
            </div>
            <div class="text-content">
                <div class="lorem-ipsum-is">
                    Lorem Ipsum is simply <br>
                    dummy text of the printing <br>
                    and dummy text
                </div>
                <p class="lorem-ipsum-detail">
                    Lorem Ipsum is simply dummy text of the printing and typesetting<br>industry.
                </p>
            </div>
        </div>
    </div>
  </article>
  <article>
      <div class="container">
        <div class = "text-center">
          <h2>dummy text of the printing and dummy</h2>
        </div>
        <p class="text-center-detail">
              Lorem Ipsum is simply <span class="font-color">dummy text</span> of the printing and typesetting industry.<br>
            Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown
        </p>
        <br/>
        <!-- 이미지 그리드 형식으로 출력 -->
        <ul class="image-list"></ul>
        <button class = "show-more">Show more</button>
        <hr/>
      </div>
  </article>
  <main>
      <div class="container">
        <div class="text-position">Where you’ll be</div>
        <p>330, Cheomdan-ro, Jeju-si, Jeju-do, Republic of Korea</p>
        <div class="map" id="map"></div>
        <br/>
        <div class="sub-background">
            <div class="text-section">
                <p class="bold-text">Subscribe to our Blog post</p>
                <p class="light-text">Lorem Ipsum is simply dummy text of the printing and typesetting industry.<br/>Lorem Ipsum has been the industry's standard dummy text </p>
            </div>
            <div class="enter-email-box">
                <img src="img/mail.png" alt="Email Icon" class="email-icon">
                <input type="email" placeholder="Enter your email">
                <button class="subscribe-button">Subscribe</button>
            </div>
            <!--모달창-->
            <div id="subscribeModal" class="modal">
                <div class="modal-content">
                    <img src="img/modal_cat.png" alt="Modal Image" style="width:110px; height:112px;">
                    <div class = "text-center">
                        Thank you!
                    </div>
                    <p>Lorem Ipsum is simply dummy text of the printing industry. </p>
                    <button class="close-modal">OK! I Love HODU</button>
                </div>
            </div>
        </div>
      </div>
  </main>
  <footer>
      <button id="scrollToTopBtn" class="scroll-to-top-btn">
          <img src="img/scroll-top.svg" alt="Scroll to top" />
      </button>
      <div class ="container">
      <img src="img/img_7.png" alt="Footer Image" class="footer-img"/>
      <br/>
      <div class="footer-content">
      <div class="logo-fin">
          <img src="img/Logo-fin.svg" alt="Hodu LOGO">
      </div>
      <ul class="sns_area">
          <li>
              <a href="http://blog.naver.com/">
                  <img src="img/blog.svg" alt="blog icon">
              </a>
          </li>
          <li>
              <a href="https://www.instagram.com/">
                  <img src="img/instagram.svg" alt="insta">
              </a>
          </li>
          <li>
              <a href="https://www.facebook.com/">
                  <img src="img/facebook.svg" alt="facebook">
              </a>
          </li>
          <li>
              <a href="https://www.youtube.com/">
                  <img src="img/youtube.svg" alt="Utube">
              </a>
          </li>
      </ul>
      </div>
      </div>
  </footer>

  <!-- 이미지 무한 스크롤 -->
  <script>
      const imageList = document.querySelector(".image-list");
      let pageToFetch = 1;

      async function fetchImages(pageNum) {
          try {
              const response = await fetch(`https://picsum.photos/v2/list?page=${pageNum}&limit=6`);

              if (!response.ok) {throw new Error('error')};

              const datas = await response.json();
              console.log(datas);

              makeImageList(datas);

          } catch (e) {
              console.error('error', e);
          }
      }

      function makeImageList(datas){
          datas.forEach((item)=>{
              imageList.innerHTML += `<li><img src='${item.download_url}' alt=''></li>`;
          })
      }

      fetchImages();
      const infinityScroll = () => {
          let scrollTotal = document.documentElement.scrollHeight;
          let scrollCurrent = window.scrollY + window.innerHeight;

          // 스크롤이 페이지 바닥에 거의 도달했는지 확인
          if (scrollCurrent >= scrollTotal - 100) { // 100px
              fetchImages(pageToFetch++);
          }
      }
      const throttling = (callback, limit) => {
          let inThrottle;
          return () => {
              if (!inThrottle) {
                  callback();
                  inThrottle = true;
                  setTimeout(() => {
                      inThrottle = false;
                  }, limit);
              }
          };
      };

      const showMoreBtn = document.querySelector(".show-more");

      showMoreBtn.addEventListener('click', () => {
          fetchImages(pageToFetch += 1);
          showMoreBtn.style.display='none';

          window.addEventListener('scroll', throttling(infinityScroll, 300));
      });
  </script>
  <!--지도 API-->
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=1703bbee2561c4f484c3903ff2b1e85c"></script>
  <script>
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
          mapOption = {
            center: new kakao.maps.LatLng(33.4423379727783, 126.571449734542), // 지도의 중심좌표
            level: 3 // 지도의 확대 레벨
          };

    // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
    var map = new kakao.maps.Map(mapContainer, mapOption);
  </script>
  <!--모달창-->
  <script>
      document.addEventListener('DOMContentLoaded', function () {
          var modal = document.getElementById('subscribeModal');
          var btn = document.querySelector('.subscribe-button');
          var closeBtn = document.querySelector('.close-modal');

          btn.onclick = function() {
              modal.style.display = 'block';
          }

          // 모달 내부 닫기 버튼 클릭 이벤트
          closeBtn.onclick = function() {
              modal.style.display = 'none';
          }

          window.onclick = function(event) {
              if (event.target == modal) {
                  modal.style.display = 'none';
              }
          }
      });
  </script>
  <!-- Top 버튼 -->
  <script>
      document.addEventListener('DOMContentLoaded', function () {
          var scrollToTopBtn = document.getElementById('scrollToTopBtn');

          scrollToTopBtn.addEventListener('mouseover', function() {
              scrollToTopBtn.innerHTML = '<img src="img/scroll-top-btn.svg" alt="Scroll to top" />';
          });

          scrollToTopBtn.addEventListener('mouseout', function() {
              scrollToTopBtn.innerHTML = '<img src="img/scroll-top.svg" alt="Scroll to top" />';
          });

          scrollToTopBtn.addEventListener('click', function() {
              window.scrollTo({ top: 0 });
          });
      });
  </script>
</body>
</html>